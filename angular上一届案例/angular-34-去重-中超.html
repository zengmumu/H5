<!DOCTYPE html>
<html ng-app="myapp">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="script/angular.min.js"></script>
		<script src="script/jquery-2.2.1.min.js"></script>
		<script src="script/bootstrap.min.js"></script>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		
	</head>
	<body>	
	
	<div class="container" ng-controller="myCtrl">
		<h1 class="text-center">2016中超联赛</h1>
			<div class="row">
				
				<form action="" class="form form-inline">
					<div class="form-group ">
							<label>全局搜索</label>
							<input type="text" class="form-control" ng-model="searchInfo.$"/>
					</div>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<div class="form-group">
							<label>场地搜索</label>
							<input type="text" class="form-control" ng-model="searchInfo.Situation"/>
					</div>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<div class="form-group">
							<label>轮次</label>
						     <select name="" id="" ng-model="searchInfo.Round" class="form-control" ng-options="item for item in uniqueRound">
						     	<option value="">--请选择轮次--</option>
						     </select>
					</div>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<div class="form-group">
							<label>日期</label>
						     <select name="" id="" ng-model="searchInfo.date" class="form-control" ng-options="item for item in uniqueDate">
						     	<option value="">--请选择轮次--</option>
						     </select>
					</div>
					
				</form>
				<table class="table table-hover table-stripe table-bordered text-center">
					<tr>
						<td ng-repeat="(k,v) in cls_header" ng-bind="v"></td>
					</tr>
					<tr ng-repeat="item in clsData|filter:searchInfo">
						<td ng-repeat="(k,v) in cls_header" ng-bind="item[k]"></td>
					</tr>
				</table>
				
			</div>
		</div>
	<script>
		var app=angular.module("myapp",[])
		.controller("myCtrl",["$scope","$http",function($scope,$http){
			$scope.cls_header={Round:"轮次",Team1:"主场",Team2:"客场",MatchCity:"城市",Situation:"球场",date:"日期",status_cn:"状态"}	
			$http.get("data/csl-data.json").success(function(res){
				$scope.clsData=res;
				$scope.searchInfo={};
				$scope.uniqueRound=unique($scope.clsData,"Round");
				$scope.uniqueDate=unique($scope.clsData,"date");
				function unique(data,type){
					var arr=[];
					for(var i=0;i<data.length;i++){
							if(arr.indexOf(data[i][type])==-1){
								arr.push(data[i][type]);
							}
					}
					return arr;
				}
				})//success ed
		}])
			
	
	</script>		
	</body>
</html>
