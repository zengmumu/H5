<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>全选效果</title>
<style type="text/css">
.bg{
	background-image: url(images/list_bg.gif);
	background-repeat: no-repeat;
	width: 730px;
}
td{text-align:center;
font-size:13px;
line-height:25px;
}
body{margin:0}
</style>
 <script type="text/JavaScript">
/*function check(){
	var all=document.getElementById("all");
	var list=document.getElementsByName("product");
	if(all.checked==true){
	
	for(var i=0;i<list.length;i++){
		list[i].checked=true;
		}
	}else{
		for(var i=0;i<list.length;i++){
		list[i].checked=false;
		}	
		}
	
	}*/
/*window.onload=init;
function init(){
	var quanxuan=document.getElementById("quanxuan");
	new checkAll(quanxuan);
}
function checkAll(elem){
	this.allbox=document.getElementById("all");
	this.products=document.getElementsByName("product");
	this.num=this.products.length;
	this.len=this.products.length;
	var obj=this;
	obj.allbox.onclick=function(){
		if(obj.allbox.checked==true){
			for(var i=0;i<obj.products.length;i++){
			obj.products[i].checked=true;}
		}else{
		for(var i=0;i<obj.products.length;i++){
			obj.products[i].checked=false;}	
		}
		
	}
	for(var i=0;i<obj.len;i++){
		
		obj.products[i].onclick=function(){
			
			if(this.checked==true){
				obj.num++;
				
				
			}else{
				obj.num--;
				
			}
			obj.checkNum();
		}
	}
	
	this.checkNum=function(){
		
		if(obj.num<obj.len){
		obj.allbox.checked=false;	
		}else{
		obj.allbox.checked=true;	
		}
	}
}
*/

window.onload=init;
function init(){
	new checkAll("all","product");
}
function checkAll(arg1,arg2){
	var allbtn=document.getElementById(arg1);
	var products=document.getElementsByName(arg2);
	var checkedNum=0;//代表被选中的product个数
	allbtn.onclick=function(){
		if(allbtn.checked==true){//如果 all checkbox 是选择的
			for(var i=0;i<products.length;i++){//把所有的product 全选
				products[i].checked=true;
				
			}
			checkedNum=products.length;
		}else{
		for(var i=0;i<products.length;i++){
				products[i].checked=false;
			}
		checkedNum=0;
			
		}
		
	}//allbtn)_click
	
	for(var i=0;i<products.length;i++){
		products[i].onclick=function(){//当单击以个product的时候
			if(this.checked==true){//如果product是选择的
				checkedNum++;//被选中的元素的个数加1
			}else{
				checkedNum--;//被选中的元素个数-1；
			}
			checkNum();
		}
		
	}
    
    function checkNum(){
    	if( checkedNum<products.length){
    		allbtn.checked=false;
    	}else{
    		allbtn.checked=true;
    	}
    }
	
}


</script>
</head>

<body>
	<table border="0" cellspacing="0" cellpadding="0" class="bg" id="quanxuan">
  <tr>
    <td style="height:40px;">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr style="font-weight:bold;">
    <td><input id="all" type="checkbox" value="全选" />全选</td>
    <td>商品图片</td>
    <td>商品名称/出售者/联系方式</td>
    <td>价格</td>
  </tr>
  <tr>
	<td colspan="4"><hr style="border:1px  #CCCCCC dashed" /></td>
    </tr>
  
  <tr>
    <td><input name="product" type="checkbox" value="1" /></td>
    <td><img src="images/list0.jpg" alt="alt" /></td>
    <td>杜比环绕，家庭影院必备，超真实享受<br />
    出售者：ling112233<br />
    <img src="images/online_pic.gif" alt="alt" /> &nbsp;&nbsp;
	<img src="images/list_tool_fav1.gif" alt="alt" /> 收藏</td>
    <td>一口价<br />
    2833.0 </td>
  </tr>
  <tr>
	<td colspan="4"><hr style="border:1px  #CCCCCC dashed" /></td>
    </tr>
  <tr>
    <td><input name="product" type="checkbox" value="2" /></td>
    <td><img src="images/list1.jpg" alt="alt" /></td>
    <td>NVDIA 9999GT 512MB 256bit极品显卡，不容错过<br />
      出售者：aipiaopiao110 <br />
    <img src="images/online_pic.gif" alt="alt" /> &nbsp;&nbsp;
	<img src="images/list_tool_fav1.gif" alt="alt" /> 收藏</td>
    <td>一口价<br />
    6464.0 </td>
  </tr>
  <tr>
	<td colspan="4"><hr style="border:1px  #CCCCCC dashed" /></td>
    </tr>
  <tr>
    <td><input name="product" type="checkbox" value="3" /></td>
    <td><img src="images/list2.jpg" alt="alt" /></td>
    <td>精品热卖：高清晰，30寸等离子电视<br />
      出售者：阳光的挣扎 <br />
    <img src="images/online_pic.gif" alt="alt" /> &nbsp;&nbsp;
	<img src="images/list_tool_fav1.gif" alt="alt" /> 收藏</td>
    <td>一口价<br />
    18888.0 </td>
  </tr>
  <tr>
	<td colspan="4"><hr style="border:1px  #CCCCCC dashed" /></td>
    </tr>
   <tr>
    <td><input name="product" type="checkbox" value="4" /></td>
    <td><img src="images/list3.jpg" alt="alt" /></td>
    <td>Sony索尼家用最新款笔记本 <br />
      出售者：疯狂的镜无<br />
    <img src="images/online_pic.gif" alt="alt" /> &nbsp;&nbsp;
	<img src="images/list_tool_fav1.gif" alt="alt" /> 收藏</td>
    <td>一口价<br />
     5889.0 </td>
  </tr>
  <tr>
	<td colspan="4"><hr style="border:1px  #CCCCCC dashed" /></td>
    </tr>
</table>

</body>
</html>
