<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>webrx-title</title>
<meta name="description" content="简介">
<meta name="keywords" content="关键字">
<link rel="stylesheet" type="text/css" href="index.css"/>
<script>


function addEvent(elem,type,fn){
	if(elem.addEventListener){
		elem.addEventListener(type,fn,false);
	}else{
		elem.attachEvent("on"+type,fn);
	}
}
function removeEvent(elem,type,fn){
	if(elem.removeEventListener){
		elem.removeEventListener(type,fn,false);
	}else{
		elem.detachEvent("on"+type,fn);
	}
}
function getTarget(evt){
	if(evt.target){
		return evt.target;
	}else{
		return window.event.srcElement;
	}
}
function prevDefault(evt){
	var e=evt||window.event;
	if(e.preventDefault){
		e.preventDefault();
	}else{
		e.returnValue=false;
	}
}
function cBuble(evt){
	var e=evt||window.event;
	if(e.cancelBubble){
		e.cancelBubble;
	}else{
		e.stopPropagation()
	}
}

addEvent(window,"load",init);
function init(){
var myp=document.getElementsByTagName("p")[0];
var mya=document.getElementsByTagName("a")[0];
	addEvent(myp,"click",fn2);	
	addEvent(mya,"click",fn3);
	addEvent(myp,"contextmenu",fn4);
	
}
function fn2(evt){
 var obj=getTarget(evt);
 alert(obj.innerHTML);	
	
}
function fn3(evt){
	prevDefault(evt);
	cBuble(evt);
	alert("a被单击了");
//	return false;
	
}
function fn4(evt){
	prevDefault(evt);
	var e=evt||window.event;
	var mydiv=document.getElementById("mydiv");	
	addEvent(mydiv,"click",fn5)
	mydiv.style.left=e.clientX+"px";
	mydiv.style.top=e.clientY+"px";
	mydiv.style.display="block";
	addEvent(document,"click",function(){
		mydiv.style.display="none";
	})
}

function fn5(){
	alert("自定义菜单被单击了");
}





//function addEvent(elem,type,fn){
//	if(elem.addEventListener){
//	   elem.addEventListener(type,fn,false);
//	}else{
//		elem.attachEvent("on"+type,fn);
//	}
//}
//
//
//addEvent(window,"load",init);
//
//
//
//
//
//function init(){
//alert(" 窗口加载了");
//}


</script>
<style>
div{ padding:100px; border:2px solid green; background-color: #E9F1BA; border: 1px solid #F2B5A9}
p{ background-color: yellow; height: 50px;}
#mydiv{border:1px solid #f0f0f0; height: 30px; line-height:30px ;width: 200px; padding: 0; background-color:#fff ; position: absolute; -webkit-box-shadow: 0px 0px 4px #999; display:none;
}
</style>
</head>

<body>

<div >
	<p id="myp">我是个P 标签<a href="http://www.baidu.com">百度</a></p>
</div>
<div id="mydiv">我是创建的右键菜单</div>
</body>
</html>
